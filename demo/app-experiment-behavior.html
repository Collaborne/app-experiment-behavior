<!doctype html>
<html>
	<head>
		<title>Demo</title>
		<script src="../../webcomponentsjs/webcomponents-lite.js"></script>

		<link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
		<link rel="import" href="../../iron-demo-helpers/demo-snippet.html">
		<link rel="import" href="../../paper-input/paper-input.html">
		<link rel="import" href="../../paper-material/paper-material.html">
		<link rel="import" href="../../paper-styles/demo-pages.html">
		<link rel="import" href="../app-experiment-behavior.html">

  
		<style is="custom-style" include="demo-pages-shared-styles">
		</style>
	</head>

	<body>
		<dom-module is="experiment-component">
			<template>
				<style>
					:host {
						margin: 2em;
					}
				</style>

				<div>[[_greeting]]</div>
			</template>

			<script>
				// Simple example for how to set the oracle with a custom extraction function.
				const oracle = Polymer.AppExperiment.Oracle.VIEWER_HASH(viewerId => viewerId);

				Polymer({
					is: 'experiment-component',

					properties: {
						experimentViewer: Object,

						_greeting: {
							type: String,
							computed: '_computeGreeting(experiment)'
						}
					},

					behaviors: [
						Polymer.AppExperiment.Behavior('experiment-component:greeting', [ 'world', 'universe' ], { oracle })
					],

					_computeGreeting(experiment) {
						const greetings = {
							'world': 'Hello, World!',
							'universe': 'Jo, Universe!'
						}

						return greetings[experiment];
					}
				})
			</script>
		</dom-module>

		<div class="vertical-section-container centered">
			<h3>Simple experiment selection based on viewer id</h3>
			<demo-snippet>
				<template is="dom-bind">
					<paper-input label="viewer" value="{{viewer}}"></paper-input>
					<experiment-component experiment-viewer="{{viewer}}"></experiment-component>	
				</template>
			</demo-snippet>
		</div>

		<script>
			const scopes = document.querySelectorAll("template[is=dom-bind]");
			scopes.forEach(function(scope) {
				scope.viewer = 'user1';
			});
		</script>		
	</body>
</html>
